// Generated by CoffeeScript 1.6.3
(function() {
  this.DropdownSelector = (function() {
    function DropdownSelector() {}

    DropdownSelector.insert = function(selector, data) {
      var $dropdown, $dropdownToggle, $menu, $target, createMenu, onClicked;
      $target = $(selector);
      $dropdown = $('<div/>', {
        "class": 'dropdown dropdown-selector'
      });
      $dropdownToggle = $('<div/>', {
        "class": 'dropdown-toggle',
        'data-toggle': 'dropdown'
      });
      $dropdownToggle.append(($('<div/>', {
        "class": 'selected-text'
      })).text(data[0]));
      $dropdownToggle.append($('<b/>', {
        "class": 'caret'
      }));
      $menu = $('<ul/>', {
        "class": 'dropdown-menu',
        'aria-labelledby': 'dropdownMenu',
        role: 'menu'
      });
      onClicked = function() {
        var $toggle;
        $toggle = $target.find('.selected-text');
        return $toggle.text(this.text);
      };
      createMenu = function($menuTarget, menuList) {
        var $a, $subMenu, $subUlMenu, key, menu, _results;
        if (menuList.length > 0) {
          menu = menuList.shift();
          if ((typeof menu) === 'object') {
            _results = [];
            for (key in menu) {
              $subMenu = $('<li/>', {
                "class": 'dropdown-submenu'
              });
              $subMenu.append(($('<a/>', {
                tabindex: -1
              })).text(key));
              $subUlMenu = $('<ul/>', {
                "class": 'dropdown-menu'
              });
              createMenu($subUlMenu, menu[key]);
              $subMenu.append($subUlMenu);
              _results.push($menuTarget.append($subMenu));
            }
            return _results;
          } else {
            $a = ($('<a/>', {
              tabindex: -1
            })).text(menu);
            $a.click(onClicked);
            $menuTarget.append(($('<li/>')).append($a));
            return createMenu($menuTarget, menuList);
          }
        }
      };
      createMenu($menu, data);
      $dropdown.append($dropdownToggle);
      $dropdown.append($menu);
      return $target.append($dropdown);
    };

    return DropdownSelector;

  })();

}).call(this);
