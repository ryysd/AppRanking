// Generated by CoffeeScript 1.6.3
(function() {
  this.DropdownSelector = (function() {
    function DropdownSelector() {}

    DropdownSelector.insert = function(selector, data) {
      var $dropdown, $dropdownToggle, $menu, $target, createMenu, onClicked;
      $target = $(selector);
      $dropdown = $('<div/>', {
        "class": 'dropdown dropdown-selector'
      });
      $dropdownToggle = $('<div/>', {
        "class": 'dropdown-toggle',
        'data-toggle': 'dropdown'
      });
      $dropdownToggle.append($('<div/>', {
        "class": 'selected-text col-md-11'
      }));
      $dropdownToggle.append($('<b/>', {
        "class": 'caret'
      }));
      $menu = $('<ul/>', {
        "class": 'dropdown-menu',
        'aria-labelledby': 'dropdownMenu',
        role: 'menu'
      });
      onClicked = function() {
        var $toggle;
        $toggle = $target.find('.selected-text');
        return $toggle.text(this.text);
      };
      createMenu = function($menuTarget, menuList) {
        var $a, $subMenu, $subUlMenu, menu, name, opts;
        if (menuList.length > 0) {
          menu = menuList.shift();
          if ((typeof menu) === 'object' && (menu.child != null)) {
            $subMenu = $('<li/>', {
              "class": 'dropdown-submenu'
            });
            $subMenu.append(($('<a/>', {
              tabindex: -1
            })).text(menu.name));
            $subUlMenu = $('<ul/>', {
              "class": 'dropdown-menu'
            });
            createMenu($subUlMenu, menu.child);
            $subMenu.append($subUlMenu);
            return $menuTarget.append($subMenu);
          } else {
            name = menu.name || menu;
            opts = menu.opts || {};
            opts.tabindex = -1;
            $a = ($('<a/>', opts)).text(name);
            $a.click(onClicked);
            $menuTarget.append(($('<li/>')).append($a));
            return createMenu($menuTarget, menuList);
          }
        }
      };
      createMenu($menu, data);
      $dropdown.append($dropdownToggle);
      $dropdown.append($menu);
      return $target.append($dropdown);
    };

    return DropdownSelector;

  })();

}).call(this);
